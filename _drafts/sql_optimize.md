---
date: 2017-08-31 12:04:38
categories: programming
tags: [programming,database]
---

# sql 优化

> 当数据库的数据量达到一定级别时，sql优化对于一个项目的数据访问尤其重要。
> 本文就对于一个项目的数据库的sql优化作出一些归纳。

<!--more-->

## sql优化可以考虑的点

1. 在复杂查询中**少用模糊匹配**`LIKE '%param%'`，`%`会**导致相关的索引无法使用**。
	1. 解决办法：
		1. 修改前台数据，将查询的条件做成既定的下拉框，这样将前台可以将查询条件定位到具体的条件；
		2. 修改后台数据，根据输入条件先将符合条件的结果查询出来保存在一个临时表中，再用临时表中的数据做复杂查询；
2. **索引**的问题：在建立索引的数据列中，有很多相关的注意事项：
	1. 不要在索引列放入`NULL`值；
	2. 避免在索引列使用函数；
	3. 避免在索引列进行数据类型转换；
	4. 避免对索引字段进行计算操作；
	5. 避免在索引列上使用`IS NULL`或`IS NOT NULL`；
	6. 避免在索引字段上使用`not`、`<>`和`!=`;
3. **复杂操作时：**当嵌套多层子查询时，这时`UPDATE　SELECT`之类的语句会太冗长复杂，如果将其拆解成几步而先生成一些临时表再关联操作是优化一个手段；
4. 能使用`UNION　ALL`的地方就不要使用`UNION`；
5. **`WHERE`条件语句**中的优化法则：
	1. 尽量避免对索引字段进行计算操作；
	2. 避免使用`in`、`not in`、`or`、`having`;
		1. 使用`exist`、`not exist` 代替`in`和`not in`；
	3. 数字型字符值使用数字格式，而不用字符格式；
6. **SELECT语句**中的优化法则：
	1. 避免使用`*`在查询语句中，可以使用多个属性名来代替；
7. **临时表**，少用临时表可以提升不少的性能；
